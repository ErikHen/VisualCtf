@using VisualCtf.ViewModels

<MudExpansionPanel Text="SETTINGS" HideIcon="true" Class=" mud-typography-body1">
    <TitleContent>
        @*<MudTooltip Text="Show/hide settings" Placement="Placement.Top">*@
            <div class="d-flex">
                <MudIcon Icon="@Icons.Material.Filled.Settings" class="mr-2"></MudIcon>
                <MudText><strong>SETTINGS</strong></MudText>
            </div>
        @*</MudTooltip>*@
    </TitleContent>
    <ChildContent>
        <MudSwitch Color="Color.Primary" @bind-Checked=@(DoGrouping) Label="Group types" /><br />
        @*<table>
        <tr>
            <td><b>Group divider</b>
             " > " <MudTooltip Text="Edit divider" Placement="Placement.Top"><MudIconButton Icon="@(Icons.Filled.Edit)" Size="Size.Small" Disabled="@(!DoGrouping)" Style="vertical-align: text-top" /></MudTooltip></td>
        </tr>
        <tr>
            <td><b>Order by</b>*@
        <b class="mr-5">Order by</b>
        <MudRadioGroup @bind-SelectedOption="@SortGroupBy">
            <MudRadio Option="@("name")" Color="Color.Primary" Disabled="@(!DoGrouping)">Group name</MudRadio>
            <MudRadio Option="@("size")" Color="Color.Primary" Disabled="@(!DoGrouping)">Group size</MudRadio>
        </MudRadioGroup>
        @*</td>
            </tr>
        </table>*@
    </ChildContent>
    
</MudExpansionPanel>

@code {

    [Parameter]
    public AppState AppState { get; set; }

    [Parameter]
    public EventCallback OnAppStateChanged { get; set; }

    private bool DoGrouping
    {
        get => AppState.DoGrouping;
        set
        {
            AppState.DoGrouping = value;
            OnAppStateChanged.InvokeAsync();
        }
    }

    private string SortGroupBy
    {
        get => AppState.SortGroupBy;
        set
        {
            AppState.SortGroupBy = value;
            OnAppStateChanged.InvokeAsync();
        }
    }

}
